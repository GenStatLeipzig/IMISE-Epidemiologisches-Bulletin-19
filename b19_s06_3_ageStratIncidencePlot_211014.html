
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  <script src="https://yihui.name/media/js/center-images.js"></script>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="https://yihui.name/knitr/"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.36</code>)
    .</p>

<div class="chunk" id="auto-report"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Setup ----</span>
<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>
<span class="hl kwd">library</span><span class="hl std">(data.table)</span>
</pre></div>
<div class="message"><pre class="knitr r">## data.table 1.14.2 using 4 threads (see ?getDTthreads).  Latest news: r-datatable.com
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(ggplot2)</span>
<span class="hl kwd">library</span><span class="hl std">(ggthemes)</span>
<span class="hl kwd">library</span><span class="hl std">(magrittr)</span>
<span class="hl kwd">library</span><span class="hl std">(scales)</span>
<span class="hl kwd">require</span><span class="hl std">(here)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Lade nötiges Paket: here
</pre></div>
<div class="message"><pre class="knitr r">## here() starts at C:/Users/IMISE/OneDrive/IMISE/R/modellclub/covid19_modellierung/_bulletin/LEipzigPlus_19/IMISE-Epidemiologisches-Bulletin-19
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">require</span><span class="hl std">(lubridate)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Lade nötiges Paket: lubridate
</pre></div>
<div class="message"><pre class="knitr r">## 
## Attache Paket: 'lubridate'
</pre></div>
<div class="message"><pre class="knitr r">## Die folgenden Objekte sind maskiert von 'package:data.table':
## 
##     hour, isoweek, mday, minute, month, quarter, second, wday, week, yday, year
</pre></div>
<div class="message"><pre class="knitr r">## Die folgenden Objekte sind maskiert von 'package:base':
## 
##     date, intersect, setdiff, union
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># based on: https://github.com/holgerman/covid19_germanyByAge/blob/main/covid19_germanyByAge/app.R</span>

<span class="hl com"># Read data ----</span>

<span class="hl com"># read data of all age groups in germany and saxony</span>
<span class="hl std">dat_age_ger</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">fread</span><span class="hl std">(</span><span class="hl kwd">here</span><span class="hl std">(</span><span class="hl str">&quot;data/211014_population_germany.csv&quot;</span><span class="hl std">),</span> <span class="hl kwc">fill</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">encoding</span> <span class="hl std">=</span> <span class="hl str">&quot;UTF-8&quot;</span><span class="hl std">)</span>
<span class="hl std">dat_age_sax</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">fread</span><span class="hl std">(</span><span class="hl kwd">here</span><span class="hl std">(</span><span class="hl str">&quot;data/211014_population_saxony.csv&quot;</span><span class="hl std">),</span> <span class="hl kwc">fill</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">encoding</span> <span class="hl std">=</span> <span class="hl str">&quot;UTF-8&quot;</span><span class="hl std">)</span>  <span class="hl com"># alterstratifizierter Bevoelkerungstand Sachsen bzw. bundeslandebene gibt es hier</span>
<span class="hl com"># https://www-genesis.destatis.de/genesis//online?operation=table&amp;code=12411-0012&amp;bypass=true&amp;levelindex=0&amp;levelid=1634203440391#abreadcrumb</span>

<span class="hl com"># alterstratifizierter Bevoelkerungstand Deutschland gibt es hier</span>
<span class="hl com"># https://www-genesis.destatis.de/genesis//online?operation=table&amp;code=12411-0006&amp;bypass=true&amp;levelindex=0&amp;levelid=1634203557481#abreadcrumb</span>

<span class="hl com"># read data of confirmed covid cases</span>
<span class="hl com"># dat_cases_age =  fread(here('data/b19_206_2_dat_cases_age.txt'), encoding = &quot;UTF-8&quot;) # &quot;https://raw.githubusercontent.com/KITmetricslab/covid19-forecast-hub-de/master/data-truth/RKI/by_age/truth_RKI-Incident%20Cases%20by%20Age_Germany.csv&quot;, encoding = &quot;UTF-8&quot;) from 16.10.21</span>

<span class="hl std">dat_cases_age</span> <span class="hl kwb">=</span>  <span class="hl kwd">fread</span><span class="hl std">(</span><span class="hl str">&quot;https://raw.githubusercontent.com/KITmetricslab/covid19-forecast-hub-de/master/data-truth/RKI/by_age/truth_RKI-Incident%20Cases%20by%20Age_Germany.csv&quot;</span><span class="hl std">,</span> <span class="hl kwc">encoding</span> <span class="hl std">=</span> <span class="hl str">&quot;UTF-8&quot;</span><span class="hl std">)</span>

<span class="hl com"># Clean data ----</span>


<span class="hl std">dat_cases_age[location_name</span> <span class="hl opt">==</span> <span class="hl str">&quot;Germany&quot;</span><span class="hl std">]</span>
</pre></div>
<div class="output"><pre class="knitr r">##             date location location_name age_group value
##    1: 2020-03-25       GM       Germany   A00-A04    32
##    2: 2020-03-25       GM       Germany   A05-A14    81
##    3: 2020-03-25       GM       Germany   A15-A34  1045
##    4: 2020-03-25       GM       Germany   A35-A59  1989
##    5: 2020-03-25       GM       Germany   A60-A79   754
##   ---                                                  
## 4280: 2021-11-27       GM       Germany   A15-A34 17319
## 4281: 2021-11-27       GM       Germany   A35-A59 24519
## 4282: 2021-11-27       GM       Germany   A60-A79  8111
## 4283: 2021-11-27       GM       Germany      A80+  2394
## 4284: 2021-11-27       GM       Germany unbekannt    76
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dat_cases_age[location_name</span> <span class="hl opt">==</span> <span class="hl str">&quot;Free State of Saxony&quot;</span><span class="hl std">]</span>
</pre></div>
<div class="output"><pre class="knitr r">##             date location        location_name age_group value
##    1: 2020-03-25     GM13 Free State of Saxony   A00-A04     0
##    2: 2020-03-25     GM13 Free State of Saxony   A05-A14     4
##    3: 2020-03-25     GM13 Free State of Saxony   A15-A34    33
##    4: 2020-03-25     GM13 Free State of Saxony   A35-A59    72
##    5: 2020-03-25     GM13 Free State of Saxony   A60-A79    30
##   ---                                                         
## 3915: 2021-11-27     GM13 Free State of Saxony   A15-A34  2389
## 3916: 2021-11-27     GM13 Free State of Saxony   A35-A59  4052
## 3917: 2021-11-27     GM13 Free State of Saxony   A60-A79  1443
## 3918: 2021-11-27     GM13 Free State of Saxony      A80+   499
## 3919: 2021-11-27     GM13 Free State of Saxony unbekannt     0
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># I only need germany and saxony</span>
<span class="hl std">dat_cases_age</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dat_cases_age[location_name</span> <span class="hl opt">%in%</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Germany&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Free State of Saxony&quot;</span><span class="hl std">)]</span>


<span class="hl com"># add overall group----</span>
<span class="hl std">dat_cases_all</span> <span class="hl kwb">=</span> <span class="hl std">dat_cases_age[,</span> <span class="hl kwd">.</span><span class="hl std">(</span><span class="hl kwc">value</span> <span class="hl std">=</span> <span class="hl kwd">sum</span><span class="hl std">(value),</span> <span class="hl kwc">age_group</span><span class="hl std">=</span><span class="hl str">&quot;alle&quot;</span><span class="hl std">),</span> <span class="hl kwd">.</span><span class="hl std">(date, location, location_name)]</span>
<span class="hl std">toolboxH</span><span class="hl opt">::</span><span class="hl kwd">showNA</span><span class="hl std">(dat_cases_all)</span>
</pre></div>
<div class="output"><pre class="knitr r">##             var NAs vals
## 1          date   0 1224
## 2      location   0 1224
## 3 location_name   0 1224
## 4         value   0 1224
## 5     age_group   0 1224
## 6   ROWS_NO_NAs   0 1224
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dat_cases_age</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(</span><span class="hl kwd">rbind</span><span class="hl std">(dat_cases_age, dat_cases_all))</span>

<span class="hl com"># exclude unknown age</span>
<span class="hl std">dat_cases_age</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dat_cases_age[age_group</span> <span class="hl opt">!=</span> <span class="hl str">&quot;unbekannt&quot;</span><span class="hl std">]</span>
<span class="hl com"># check</span>
<span class="hl kwd">stopifnot</span><span class="hl std">(dat_cases_age[age_group</span><span class="hl opt">==</span><span class="hl str">&quot;unbekannt&quot;</span><span class="hl std">, .N</span> <span class="hl opt">==</span> <span class="hl num">0</span><span class="hl std">])</span>

<span class="hl com"># clean values &lt; 0</span>
<span class="hl com"># dat_cases_age[value &lt; 0, ][order(date)]</span>
<span class="hl com"># </span>
<span class="hl com"># dat_cases_age[value &gt;= 0, ] # TODO Negativ sollten Nachmeldungen sein, dass am vorigen Tag zu viel gemeldet wurde. Muessten eigentlich mit vorigem Tag verrechnet werden, i.e. vorigen Tag nach unten korrigieren. In schleife, fall dann voriger Tag negativ wird, bis keiner mehr negativ ist. Fuer aktuelle Darstellung im Bulletin 19 aber ausreichend </span>

<span class="hl com"># useless group</span>
<span class="hl std">dat_cases_age</span><span class="hl opt">$</span><span class="hl std">location</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">NULL</span>

<span class="hl com"># Create age groups ----</span>

<span class="hl com"># create age group totals</span>
<span class="hl std">all_groups</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">unique</span><span class="hl std">(dat_cases_age</span><span class="hl opt">$</span><span class="hl std">age_group)</span>

<span class="hl com"># for german total data</span>
<span class="hl std">dat_age_ger</span><span class="hl opt">$</span><span class="hl std">age_group</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">NULL</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning in set(x, j = name, value = value): Column 'age_group' does not exist to remove
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dat_age_ger[</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;4-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">1</span><span class="hl std">]]</span>
<span class="hl std">dat_age_ger[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;5-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;14-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">2</span><span class="hl std">]]</span>
<span class="hl std">dat_age_ger[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;15-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;34-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">3</span><span class="hl std">]]</span>
<span class="hl std">dat_age_ger[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;35-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;59-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">4</span><span class="hl std">]]</span>
<span class="hl std">dat_age_ger[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;60-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;79-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">5</span><span class="hl std">]]</span>
<span class="hl std">dat_age_ger[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;80-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl std">.N, age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">6</span><span class="hl std">]]</span>

<span class="hl com"># for saxony data</span>
<span class="hl std">dat_age_sax</span><span class="hl opt">$</span><span class="hl std">age_group</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">NULL</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning in set(x, j = name, value = value): Column 'age_group' does not exist to remove
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dat_age_sax[</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;4-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">1</span><span class="hl std">]]</span>
<span class="hl std">dat_age_sax[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;5-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;14-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">2</span><span class="hl std">]]</span>
<span class="hl std">dat_age_sax[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;15-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;34-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">3</span><span class="hl std">]]</span>
<span class="hl std">dat_age_sax[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;35-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;59-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">4</span><span class="hl std">]]</span>
<span class="hl std">dat_age_sax[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;60-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;79-Jährige&quot;</span><span class="hl std">), age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">5</span><span class="hl std">]]</span>
<span class="hl std">dat_age_sax[</span><span class="hl kwd">which</span><span class="hl std">(age</span> <span class="hl opt">==</span> <span class="hl str">&quot;80-Jährige&quot;</span><span class="hl std">)</span><span class="hl opt">:</span><span class="hl std">.N, age_group</span> <span class="hl kwb">:=</span> <span class="hl std">all_groups[</span><span class="hl num">6</span><span class="hl std">]]</span>

<span class="hl com"># summarize by age group</span>
<span class="hl std">dat_age_ger_sum</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dat_age_ger[,</span> <span class="hl kwd">.</span><span class="hl std">(</span><span class="hl kwc">pop_sum</span> <span class="hl std">=</span> <span class="hl kwd">sum</span><span class="hl std">(pop_total)),</span> <span class="hl kwc">by</span> <span class="hl std">= age_group]</span>
<span class="hl std">dat_age_ger_sum[, location_name</span> <span class="hl kwb">:=</span> <span class="hl str">&quot;Germany&quot;</span><span class="hl std">]</span>
<span class="hl std">dat_age_sax_sum</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dat_age_sax[,</span> <span class="hl kwd">.</span><span class="hl std">(</span><span class="hl kwc">pop_sum</span> <span class="hl std">=</span> <span class="hl kwd">sum</span><span class="hl std">(pop_sac)),</span> <span class="hl kwc">by</span> <span class="hl std">= age_group]</span>
<span class="hl std">dat_age_sax_sum[, location_name</span> <span class="hl kwb">:=</span> <span class="hl str">&quot;Free State of Saxony&quot;</span><span class="hl std">]</span>

<span class="hl com"># merge</span>
<span class="hl std">dat_age_sum_pre</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">rbindlist</span><span class="hl std">(</span><span class="hl kwd">list</span><span class="hl std">(dat_age_ger_sum, dat_age_sax_sum))</span>
<span class="hl std">dat_age_sum_all</span> <span class="hl kwb">=</span> <span class="hl std">dat_age_sum_pre[,</span><span class="hl kwd">.</span><span class="hl std">(</span><span class="hl kwc">age_group</span> <span class="hl std">=</span> <span class="hl str">&quot;alle&quot;</span><span class="hl std">,</span><span class="hl kwc">pop_sum</span> <span class="hl std">=</span> <span class="hl kwd">sum</span><span class="hl std">(pop_sum)),</span> <span class="hl kwd">.</span><span class="hl std">(location_name)]</span>
<span class="hl std">dat_age_sum</span> <span class="hl kwb">=</span> <span class="hl kwd">rbind</span><span class="hl std">(dat_age_sum_pre, dat_age_sum_all)</span>
<span class="hl std">dat_age_sum</span>
</pre></div>
<div class="output"><pre class="knitr r">##     age_group  pop_sum        location_name
##  1:   A00-A04  3969138              Germany
##  2:   A05-A14  7508662              Germany
##  3:   A15-A34 18921292              Germany
##  4:   A35-A59 28666166              Germany
##  5:   A60-A79 18153339              Germany
##  6:      A80+  5936434              Germany
##  7:   A00-A04   180370 Free State of Saxony
##  8:   A05-A14   365417 Free State of Saxony
##  9:   A15-A34   786243 Free State of Saxony
## 10:   A35-A59  1351804 Free State of Saxony
## 11:   A60-A79  1011120 Free State of Saxony
## 12:      A80+   361987 Free State of Saxony
## 13:      alle 83155031              Germany
## 14:      alle  4056941 Free State of Saxony
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">toolboxH</span><span class="hl opt">::</span><span class="hl kwd">WriteXLS_hk</span><span class="hl std">(</span><span class="hl str">&quot;dat_age_sum&quot;</span><span class="hl std">,</span> <span class="hl kwd">here</span><span class="hl std">(</span><span class="hl str">&quot;results/b19_s06_3_numbers_per_age_group.xlsx&quot;</span><span class="hl std">))</span>
<span class="hl com"># Merge data ----</span>

<span class="hl com"># match to dat_cases_age</span>
<span class="hl std">m1</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">match</span><span class="hl std">(</span>
  <span class="hl std">dat_cases_age[,</span> <span class="hl kwd">paste0</span><span class="hl std">(location_name, age_group)],</span>
  <span class="hl std">dat_age_sum[,</span> <span class="hl kwd">paste0</span><span class="hl std">(location_name, age_group)]</span>
<span class="hl std">)</span>
<span class="hl std">dat_cases_age[, pop_group</span> <span class="hl kwb">:=</span> <span class="hl std">dat_age_sum[m1, pop_sum]]</span>

<span class="hl com"># Calculate incidence and rolling sum ----</span>


<span class="hl com"># get incidence PER age group</span>
<span class="hl std">dat_cases_age[, value_per_group</span> <span class="hl kwb">:=</span> <span class="hl std">(value</span> <span class="hl opt">/</span> <span class="hl std">pop_group)</span> <span class="hl opt">*</span> <span class="hl num">100000</span><span class="hl std">]</span>


<span class="hl com"># numeric error?</span>
<span class="hl com"># dat_cases_age[,  .((value / (pop_group / 100000)),((value / pop_group)* 100000))][V1 != V2, plot(V1~V2)]</span>

<span class="hl com"># get the rolling mean over 7 days?</span>
<span class="hl com"># dat_cases_age[,  val_mean := frollmean(n = 7, x = value_per_group, align = &quot;right&quot;, na.rm = T), .(location_name, age_group)]</span>

<span class="hl com"># for each age group</span>
<span class="hl kwd">setorder</span><span class="hl std">(dat_cases_age, date, location_name, age_group)</span>
<span class="hl std">dat_cases_age[,  val_sum_group</span> <span class="hl kwb">:=</span> <span class="hl kwd">frollsum</span><span class="hl std">(</span>
  <span class="hl kwc">n</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">,</span>
  <span class="hl kwc">x</span> <span class="hl std">= value_per_group,</span>
  <span class="hl kwc">align</span> <span class="hl std">=</span> <span class="hl str">&quot;right&quot;</span><span class="hl std">,</span>
  <span class="hl kwc">na.rm</span> <span class="hl std">= T),</span> <span class="hl kwd">.</span><span class="hl std">(location_name, age_group)]</span>



<span class="hl com"># Plotting ----</span>

<span class="hl com"># plot with 100k per age group</span>
<span class="hl std">brk_vec</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl kwd">max</span><span class="hl std">(dat_cases_age</span><span class="hl opt">$</span><span class="hl std">date),</span><span class="hl kwd">min</span><span class="hl std">(dat_cases_age</span><span class="hl opt">$</span><span class="hl std">date),</span> <span class="hl opt">-</span><span class="hl num">14</span><span class="hl std">)</span>

<span class="hl std">dat_cases_age[, location_name</span> <span class="hl kwb">:=</span> <span class="hl kwd">factor</span><span class="hl std">(location_name,</span> <span class="hl kwc">levels</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Germany&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Free State of Saxony&quot;</span><span class="hl std">))]</span>

<span class="hl std">mindat</span> <span class="hl kwb">=</span> <span class="hl kwd">as_date</span><span class="hl std">(</span><span class="hl str">&quot;2021-06-07&quot;</span><span class="hl std">)</span>



<span class="hl std">maxi</span> <span class="hl kwb">=</span> <span class="hl std">dat_cases_age[date</span> <span class="hl opt">==</span><span class="hl kwd">max</span><span class="hl std">(date)]</span>
<span class="hl std">maxi[,val_sum_group_round</span> <span class="hl kwb">:=</span> <span class="hl kwd">round</span><span class="hl std">(val_sum_group,</span><span class="hl num">0</span><span class="hl std">)</span> <span class="hl opt">%&gt;%</span> <span class="hl kwd">as.character</span><span class="hl std">()]</span>
<span class="hl std">maxi[,val_sum_group_round_name</span> <span class="hl kwb">:=</span> <span class="hl kwd">paste0</span><span class="hl std">(age_group,</span><span class="hl str">&quot;: &quot;</span><span class="hl std">, val_sum_group_round)]</span>
<span class="hl std">maxi</span>
</pre></div>
<div class="output"><pre class="knitr r">##           date        location_name age_group value pop_group value_per_group
##  1: 2021-11-27 Free State of Saxony   A00-A04   214    180370       118.64501
##  2: 2021-11-27 Free State of Saxony   A05-A14  1995    365417       545.95161
##  3: 2021-11-27 Free State of Saxony   A15-A34  2389    786243       303.85008
##  4: 2021-11-27 Free State of Saxony   A35-A59  4052   1351804       299.74760
##  5: 2021-11-27 Free State of Saxony   A60-A79  1443   1011120       142.71303
##  6: 2021-11-27 Free State of Saxony      A80+   499    361987       137.85025
##  7: 2021-11-27 Free State of Saxony      alle 10592   4056941       261.08341
##  8: 2021-11-27              Germany   A00-A04  1944   3969138        48.97789
##  9: 2021-11-27              Germany   A05-A14 12762   7508662       169.96370
## 10: 2021-11-27              Germany   A15-A34 17319  18921292        91.53180
## 11: 2021-11-27              Germany   A35-A59 24519  28666166        85.53289
## 12: 2021-11-27              Germany   A60-A79  8111  18153339        44.68049
## 13: 2021-11-27              Germany      A80+  2394   5936434        40.32724
## 14: 2021-11-27              Germany      alle 67125  83155031        80.72272
##     val_sum_group val_sum_group_round val_sum_group_round_name
##  1:      700.2273                 700             A00-A04: 700
##  2:     3399.1303                3399            A05-A14: 3399
##  3:     1736.9948                1737            A15-A34: 1737
##  4:     1809.0640                1809            A35-A59: 1809
##  5:      809.1028                 809             A60-A79: 809
##  6:      711.6278                 712                A80+: 712
##  7:     1541.9253                1542               alle: 1542
##  8:      285.8051                 286             A00-A04: 286
##  9:     1033.4464                1033            A05-A14: 1033
## 10:      538.9748                 539             A15-A34: 539
## 11:      522.2254                 522             A35-A59: 522
## 12:      273.2335                 273             A60-A79: 273
## 13:      245.9389                 246                A80+: 246
## 14:      487.1383                 487                alle: 487
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">gg_color_hue</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">n</span><span class="hl std">) {</span>
  <span class="hl std">hues</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl num">15</span><span class="hl std">,</span> <span class="hl num">375</span><span class="hl std">,</span> <span class="hl kwc">length</span> <span class="hl std">= n</span> <span class="hl opt">+</span> <span class="hl num">1</span><span class="hl std">)</span>
  <span class="hl kwd">hcl</span><span class="hl std">(</span><span class="hl kwc">h</span> <span class="hl std">= hues,</span> <span class="hl kwc">l</span> <span class="hl std">=</span> <span class="hl num">65</span><span class="hl std">,</span> <span class="hl kwc">c</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">)[</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl std">n]</span>
<span class="hl std">}</span>

<span class="hl std">p1</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ggplot</span><span class="hl std">(dat_cases_age[age_group</span><span class="hl opt">!=</span><span class="hl str">&quot;alle&quot;</span> <span class="hl opt">&amp;</span> <span class="hl std">date</span> <span class="hl opt">&gt;=</span> <span class="hl std">mindat, ],</span>
             <span class="hl kwd">aes</span><span class="hl std">(date,</span>
                 <span class="hl std">val_sum_group,</span>
                 <span class="hl kwc">color</span> <span class="hl std">= age_group )</span>
<span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">geom_line</span><span class="hl std">(</span><span class="hl kwc">size</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">,</span> <span class="hl kwc">alpha</span><span class="hl std">=</span> <span class="hl num">0.5</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">geom_line</span><span class="hl std">(</span><span class="hl kwc">data</span> <span class="hl std">= dat_cases_age[age_group</span><span class="hl opt">==</span><span class="hl str">&quot;alle&quot;</span> <span class="hl opt">&amp;</span> <span class="hl std">date</span> <span class="hl opt">&gt;=</span> <span class="hl std">mindat],</span> <span class="hl kwc">color</span> <span class="hl std">=</span> <span class="hl str">&quot;black&quot;</span><span class="hl std">,</span> <span class="hl kwc">size</span> <span class="hl std">=</span> <span class="hl num">1.5</span><span class="hl std">,</span><span class="hl kwc">lty</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">,</span> <span class="hl kwc">alpha</span><span class="hl std">=</span> <span class="hl num">0.7</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">geom_line</span><span class="hl std">(</span><span class="hl kwc">data</span> <span class="hl std">= dat_cases_age[age_group</span><span class="hl opt">==</span><span class="hl str">&quot;alle&quot;</span> <span class="hl opt">&amp;</span> <span class="hl std">date</span> <span class="hl opt">&gt;=</span> <span class="hl std">mindat],</span> <span class="hl kwc">color</span> <span class="hl std">=</span> <span class="hl str">&quot;black&quot;</span><span class="hl std">,</span> <span class="hl kwc">size</span> <span class="hl std">=</span> <span class="hl num">1.5</span><span class="hl std">,</span><span class="hl kwc">lty</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">alpha</span><span class="hl std">=</span> <span class="hl num">0.5</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">facet_wrap</span><span class="hl std">(</span><span class="hl opt">~</span><span class="hl std">location_name,</span>
             <span class="hl kwc">scales</span> <span class="hl std">=</span> <span class="hl str">&quot;fixed&quot;</span><span class="hl std">,</span>
             <span class="hl kwc">labeller</span> <span class="hl std">=</span> <span class="hl kwd">labeller</span><span class="hl std">(</span>
               <span class="hl kwc">location_name</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span>
                 <span class="hl str">&quot;Germany&quot;</span> <span class="hl std">=</span> <span class="hl str">&quot;Deutschland&quot;</span><span class="hl std">,</span>
                 <span class="hl str">&quot;Free State of Saxony&quot;</span> <span class="hl std">=</span> <span class="hl str">&quot;Freistaat Sachsen&quot;</span>
               <span class="hl std">)))</span> <span class="hl opt">+</span>
  <span class="hl kwd">scale_y_log10</span><span class="hl std">(</span>
    <span class="hl kwc">breaks</span> <span class="hl std">=</span> <span class="hl kwd">log_breaks</span><span class="hl std">(</span><span class="hl num">14</span><span class="hl std">),</span>
    <span class="hl kwc">label</span> <span class="hl std">=</span> <span class="hl kwd">label_comma</span><span class="hl std">(</span><span class="hl kwc">accuracy</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">),</span>
    <span class="hl kwc">sec.axis</span> <span class="hl std">=</span><span class="hl kwd">dup_axis</span><span class="hl std">()</span>

  <span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">theme_pander</span><span class="hl std">(</span><span class="hl kwc">base_size</span> <span class="hl std">=</span> <span class="hl num">14</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">theme</span><span class="hl std">(</span><span class="hl kwc">axis.text.x</span> <span class="hl std">=</span> <span class="hl kwd">element_text</span><span class="hl std">(</span><span class="hl kwc">angle</span> <span class="hl std">=</span> <span class="hl num">90</span><span class="hl std">,</span> <span class="hl kwc">vjust</span> <span class="hl std">=</span> <span class="hl num">0.4</span><span class="hl std">),</span>
        <span class="hl kwc">panel.grid.major</span> <span class="hl std">=</span> <span class="hl kwd">element_line</span><span class="hl std">(</span><span class="hl kwc">linetype</span> <span class="hl std">=</span> <span class="hl str">&quot;solid&quot;</span><span class="hl std">),</span>
        <span class="hl kwc">panel.grid.minor</span> <span class="hl std">=</span> <span class="hl kwd">element_blank</span><span class="hl std">(),</span>
        <span class="hl kwc">legend.position</span> <span class="hl std">=</span> <span class="hl str">&quot;bottom&quot;</span>
  <span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">scale_x_date</span><span class="hl std">(</span><span class="hl kwc">breaks</span> <span class="hl std">= brk_vec,</span> <span class="hl kwc">date_labels</span> <span class="hl std">=</span> <span class="hl str">&quot;%d-%b-%y&quot;</span>  <span class="hl std">,</span> <span class="hl kwc">limits</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(mindat,</span> <span class="hl kwd">max</span><span class="hl std">(dat_cases_age</span><span class="hl opt">$</span><span class="hl std">date)</span><span class="hl opt">+</span><span class="hl num">38</span><span class="hl std">) )</span> <span class="hl opt">+</span>
  <span class="hl kwd">ylab</span><span class="hl std">(</span><span class="hl str">&quot;&quot;</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">xlab</span><span class="hl std">(</span><span class="hl str">&quot;&quot;</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">scale_color_manual</span><span class="hl std">(</span><span class="hl kwc">values</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl kwd">gg_color_hue</span><span class="hl std">(</span><span class="hl num">6</span><span class="hl std">),</span> <span class="hl str">&quot;black&quot;</span><span class="hl std">))</span><span class="hl opt">+</span>
  <span class="hl kwd">labs</span><span class="hl std">(</span><span class="hl kwc">color</span> <span class="hl std">=</span> <span class="hl str">&quot;Altersgruppe&quot;</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">ylab</span><span class="hl std">(</span><span class="hl str">&quot;7-Tage Inzidenz&quot;</span><span class="hl std">)</span> <span class="hl opt">+</span>
  <span class="hl kwd">coord_cartesian</span><span class="hl std">(</span><span class="hl kwc">ylim</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0.5</span><span class="hl std">,</span> <span class="hl kwd">max</span><span class="hl std">(dat_cases_age[date</span> <span class="hl opt">&gt;=</span> <span class="hl std">mindat, val_sum_group],</span> <span class="hl kwc">na.rm</span> <span class="hl std">= T)))</span><span class="hl opt">+</span>
  <span class="hl std">ggrepel</span><span class="hl opt">::</span><span class="hl kwd">geom_text_repel</span><span class="hl std">(</span><span class="hl kwc">data</span> <span class="hl std">= maxi,</span> <span class="hl kwd">aes</span><span class="hl std">(</span><span class="hl kwc">label</span> <span class="hl std">= val_sum_group_round_name ),</span> <span class="hl kwc">size</span><span class="hl std">=</span><span class="hl num">2.5</span><span class="hl std">,</span> <span class="hl kwc">alpha</span> <span class="hl std">=</span> <span class="hl num">0.8</span><span class="hl std">,</span> <span class="hl kwc">show.legend</span><span class="hl std">=</span><span class="hl num">FALSE</span><span class="hl std">,</span>   <span class="hl kwc">min.segment.length</span> <span class="hl std">=</span> <span class="hl num">11</span><span class="hl std">,</span> <span class="hl kwc">force</span> <span class="hl std">=</span> <span class="hl num">0.001</span><span class="hl std">,</span>  <span class="hl kwc">nudge_x</span> <span class="hl std">=</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl kwc">direction</span> <span class="hl std">=</span> <span class="hl str">&quot;y&quot;</span><span class="hl std">,</span> <span class="hl kwc">hjust</span> <span class="hl std">=</span> <span class="hl str">&quot;left&quot;</span><span class="hl std">)</span><span class="hl opt">+</span>
  <span class="hl kwd">guides</span><span class="hl std">(</span><span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">guide_legend</span><span class="hl std">(</span><span class="hl kwc">nrow</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">,</span><span class="hl kwc">override.aes</span><span class="hl std">=</span><span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">size</span><span class="hl std">=</span><span class="hl num">2</span><span class="hl std">),</span><span class="hl kwc">keywidth</span> <span class="hl std">=</span> <span class="hl num">1.5</span><span class="hl std">))</span>

<span class="hl std">p1</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning in self$trans$transform(x): NaNs produced
</pre></div>
<div class="warning"><pre class="knitr r">## Warning: Transformation introduced infinite values in continuous y-axis
</pre></div>
</div><div class="rimage center"><img src="figure/b19-s06-3-ageStratIncidencePlot-211014-Rhtmlauto-report-1.png" title="plot of chunk auto-report" alt="plot of chunk auto-report" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl std">p2</span> <span class="hl kwb">=</span> <span class="hl std">p1</span> <span class="hl opt">+</span> <span class="hl kwd">scale_y_continuous</span><span class="hl std">(</span><span class="hl kwc">breaks</span> <span class="hl std">=</span> <span class="hl kwd">pretty_breaks</span><span class="hl std">(</span><span class="hl num">12</span><span class="hl std">),</span><span class="hl kwc">sec.axis</span> <span class="hl std">=</span> <span class="hl kwd">dup_axis</span><span class="hl std">())</span> <span class="hl com">#+ theme(axis.title.y.right = element_blank())</span>
</pre></div>
<div class="message"><pre class="knitr r">## Scale for 'y' is already present. Adding another scale for 'y', which will replace the
## existing scale.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">p2</span>
</pre></div>
</div><div class="rimage center"><img src="figure/b19-s06-3-ageStratIncidencePlot-211014-Rhtmlauto-report-2.png" title="plot of chunk auto-report" alt="plot of chunk auto-report" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># Small check ----</span>

<span class="hl com"># calculate incidences without age stratification</span>
<span class="hl std">tmp</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dat_cases_age[,</span> <span class="hl kwd">.</span><span class="hl std">(</span><span class="hl kwc">val</span> <span class="hl std">=</span> <span class="hl kwd">sum</span><span class="hl std">(value)),</span> <span class="hl kwd">.</span><span class="hl std">(date, location_name)]</span>
<span class="hl std">tmp[, val_rel</span> <span class="hl kwb">:=</span> <span class="hl std">(val</span> <span class="hl opt">/</span> <span class="hl num">83155031</span><span class="hl std">)</span><span class="hl opt">*</span> <span class="hl num">100000</span><span class="hl std">]</span>
<span class="hl std">tmp[,</span>  <span class="hl kwd">.</span><span class="hl std">(date,</span> <span class="hl kwd">frollsum</span><span class="hl std">(</span>
  <span class="hl kwc">n</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">,</span>
  <span class="hl kwc">x</span> <span class="hl std">= val_rel,</span>
  <span class="hl kwc">align</span> <span class="hl std">=</span> <span class="hl str">&quot;right&quot;</span><span class="hl std">,</span>
  <span class="hl kwc">na.rm</span> <span class="hl std">= T)),</span> <span class="hl kwd">.</span><span class="hl std">(location_name)][location_name</span><span class="hl opt">==</span><span class="hl str">&quot;Germany&quot;</span> <span class="hl opt">&amp;</span> <span class="hl std">date</span> <span class="hl opt">&gt;=</span> <span class="hl str">&quot;2021-10-10&quot;</span><span class="hl std">]</span>
</pre></div>
<div class="output"><pre class="knitr r">##     location_name       date       V2
##  1:       Germany 2021-10-10 139.4287
##  2:       Germany 2021-10-11 139.4889
##  3:       Germany 2021-10-12 139.8580
##  4:       Germany 2021-10-13 140.7311
##  5:       Germany 2021-10-14 142.5169
##  6:       Germany 2021-10-15 145.1265
##  7:       Germany 2021-10-16 150.1292
##  8:       Germany 2021-10-17 152.7039
##  9:       Germany 2021-10-18 154.9744
## 10:       Germany 2021-10-19 159.2964
## 11:       Germany 2021-10-20 171.6072
## 12:       Germany 2021-10-21 180.5038
## 13:       Germany 2021-10-22 199.8725
## 14:       Germany 2021-10-23 210.0113
## 15:       Germany 2021-10-24 222.1694
## 16:       Germany 2021-10-25 228.2159
## 17:       Germany 2021-10-27 292.9372
## 18:       Germany 2021-10-28 319.4106
## 19:       Germany 2021-10-29 340.0552
## 20:       Germany 2021-10-30 344.7957
## 21:       Germany 2021-10-31 348.9651
## 22:       Germany 2021-11-01 339.1376
## 23:       Germany 2021-11-02 349.3367
## 24:       Germany 2021-11-03 317.3927
## 25:       Germany 2021-11-04 331.5001
## 26:       Germany 2021-11-05 361.4249
## 27:       Germany 2021-11-06 391.2499
## 28:       Germany 2021-11-07 407.2538
## 29:       Germany 2021-11-08 421.3395
## 30:       Germany 2021-11-09 447.7155
## 31:       Germany 2021-11-10 494.0675
## 32:       Germany 2021-11-11 533.1920
## 33:       Germany 2021-11-12 560.9498
## 34:       Germany 2021-11-13 587.6902
## 35:       Germany 2021-11-14 611.6106
## 36:       Germany 2021-11-15 631.0670
## 37:       Germany 2021-11-16 655.7258
## 38:       Germany 2021-11-17 687.3499
## 39:       Germany 2021-11-18 723.7385
## 40:       Germany 2021-11-19 734.4751
## 41:       Germany 2021-11-20 779.8037
## 42:       Germany 2021-11-21 801.9936
## 43:       Germany 2021-11-22 818.9090
## 44:       Germany 2021-11-23 850.8373
## 45:       Germany 2021-11-24 884.6873
## 46:       Germany 2021-11-25 910.3093
## 47:       Germany 2021-11-26 966.3144
## 48:       Germany 2021-11-27 973.9711
##     location_name       date       V2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Saving ----</span>

<span class="hl kwd">ggsave</span><span class="hl std">(</span><span class="hl kwc">plot</span> <span class="hl std">= p1,</span>
       <span class="hl kwc">filename</span> <span class="hl std">=</span> <span class="hl kwd">here</span><span class="hl std">(</span><span class="hl str">&quot;results/b19_s06_3_ageStratPlot.jpeg&quot;</span><span class="hl std">),</span>
       <span class="hl kwc">dpi</span> <span class="hl std">=</span> <span class="hl num">300</span><span class="hl std">,</span>
       <span class="hl kwc">device</span> <span class="hl std">=</span> <span class="hl str">&quot;jpeg&quot;</span><span class="hl std">,</span>
       <span class="hl kwc">units</span> <span class="hl std">=</span> <span class="hl str">&quot;in&quot;</span><span class="hl std">,</span>
       <span class="hl kwc">height</span> <span class="hl std">=</span> <span class="hl num">5</span><span class="hl std">,</span>
       <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl num">9</span><span class="hl std">)</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning in self$trans$transform(x): NaNs produced

## Warning in self$trans$transform(x): Transformation introduced infinite values in
## continuous y-axis
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># # </span>
<span class="hl com"># # # save data</span>
<span class="hl com"># fwrite(x = dat_cases_age,</span>
<span class="hl com">#        file = here(&quot;results/b19_s06_3_ageStratDat_211014.tsv&quot;),</span>
<span class="hl com">#        sep = &quot;\t&quot;)</span>

<span class="hl com"># Session Info ----</span>

<span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 4.1.1 (2021-08-10)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19043)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
## [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] lubridate_1.8.0   here_1.0.1        scales_1.1.1      magrittr_2.0.1   
## [5] ggthemes_4.2.4    ggplot2_3.3.5     data.table_1.14.2
## 
## loaded via a namespace (and not attached):
##  [1] ggrepel_0.9.1       Rcpp_1.0.7          lattice_0.20-44     tidyr_1.1.4        
##  [5] png_0.1-7           class_7.3-19        digest_0.6.28       rprojroot_2.0.2    
##  [9] utf8_1.2.2          cellranger_1.1.0    R6_2.5.1            plyr_1.8.6         
## [13] WriteXLS_6.3.0      evaluate_0.14       e1071_1.7-9         httr_1.4.2         
## [17] highr_0.9           pillar_1.6.3        RgoogleMaps_1.4.5.3 GADMTools_3.9-1    
## [21] rlang_0.4.11        curl_4.3.2          readxl_1.3.1        toolboxH_0.2.16    
## [25] R.utils_2.11.0      R.oo_1.24.0         rgdal_1.5-27        pander_0.6.4       
## [29] stringr_1.4.0       foreign_0.8-81      munsell_0.5.0       proxy_0.4-26       
## [33] rosm_0.2.5          compiler_4.1.1      xfun_0.26           pkgconfig_2.0.3    
## [37] rgeos_0.5-8         tidyselect_1.1.1    tibble_3.1.5        gridExtra_2.3      
## [41] fansi_0.5.0         withr_2.4.2         crayon_1.4.1        dplyr_1.0.7        
## [45] sf_1.0-3            bitops_1.0-7        R.methodsS3_1.8.1   grid_4.1.1         
## [49] jsonlite_1.7.2      gtable_0.3.0        lifecycle_1.0.1     DBI_1.1.1          
## [53] units_0.7-2         KernSmooth_2.23-20  stringi_1.7.5       farver_2.1.0       
## [57] testthat_3.1.0      fdrtool_1.2.16      sp_1.4-5            ellipsis_0.3.2     
## [61] generics_0.1.0      vctrs_0.3.8         rjson_0.2.20        RColorBrewer_1.1-2 
## [65] tools_4.1.1         ggmap_3.0.0         ggspatial_1.1.5     glue_1.4.2         
## [69] purrr_0.3.4         jpeg_0.1-9          colorspace_2.0-2    maptools_1.1-2     
## [73] classInt_0.4-3      knitr_1.36
</pre></div>
</div></div>

  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r">    <span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 4.1.1 (2021-08-10)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19043)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
## [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] lubridate_1.8.0   here_1.0.1        scales_1.1.1      magrittr_2.0.1   
## [5] ggthemes_4.2.4    ggplot2_3.3.5     data.table_1.14.2
## 
## loaded via a namespace (and not attached):
##  [1] ggrepel_0.9.1       Rcpp_1.0.7          lattice_0.20-44     tidyr_1.1.4        
##  [5] png_0.1-7           class_7.3-19        digest_0.6.28       rprojroot_2.0.2    
##  [9] utf8_1.2.2          cellranger_1.1.0    R6_2.5.1            plyr_1.8.6         
## [13] WriteXLS_6.3.0      evaluate_0.14       e1071_1.7-9         httr_1.4.2         
## [17] highr_0.9           pillar_1.6.3        RgoogleMaps_1.4.5.3 GADMTools_3.9-1    
## [21] rlang_0.4.11        curl_4.3.2          readxl_1.3.1        toolboxH_0.2.16    
## [25] R.utils_2.11.0      R.oo_1.24.0         rgdal_1.5-27        pander_0.6.4       
## [29] stringr_1.4.0       foreign_0.8-81      munsell_0.5.0       proxy_0.4-26       
## [33] rosm_0.2.5          compiler_4.1.1      xfun_0.26           pkgconfig_2.0.3    
## [37] rgeos_0.5-8         tidyselect_1.1.1    tibble_3.1.5        gridExtra_2.3      
## [41] fansi_0.5.0         withr_2.4.2         crayon_1.4.1        dplyr_1.0.7        
## [45] sf_1.0-3            bitops_1.0-7        R.methodsS3_1.8.1   grid_4.1.1         
## [49] jsonlite_1.7.2      gtable_0.3.0        lifecycle_1.0.1     DBI_1.1.1          
## [53] units_0.7-2         KernSmooth_2.23-20  stringi_1.7.5       farver_2.1.0       
## [57] testthat_3.1.0      fdrtool_1.2.16      sp_1.4-5            ellipsis_0.3.2     
## [61] generics_0.1.0      vctrs_0.3.8         rjson_0.2.20        RColorBrewer_1.1-2 
## [65] tools_4.1.1         ggmap_3.0.0         ggspatial_1.1.5     glue_1.4.2         
## [69] purrr_0.3.4         jpeg_0.1-9          colorspace_2.0-2    maptools_1.1-2     
## [73] classInt_0.4-3      knitr_1.36
</pre></div>
<div class="source"><pre class="knitr r">    <span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;2021-11-27 14:16:52 CET&quot;
</pre></div>
</div></div>


</body>
</html>
